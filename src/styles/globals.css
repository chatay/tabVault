@import "tailwindcss";

/* ─── LIGHT THEME ─── */
[data-theme="light"] {
  --bg: #F0F2F5;
  --surface: #FFFFFF;
  --surface-2: #F7F8FA;
  --surface-3: #F0F1F3;
  --border: #E8EAED;
  --border-strong: #D1D5DB;
  --text-primary: #141416;
  --text-secondary: #6B7280;
  --text-muted: #9CA3AF;
  --accent: #4F6EF7;
  --accent-soft: #EEF1FE;
  --accent-hover: #3D5CE5;
  --warning: #F59E0B;
  --warning-soft: #FFFBEB;
  --warning-border: #FCD34D;
  --warning-text: #92400E;
  --green: #10B981;
  --green-soft: #ECFDF5;
  --red: #EF4444;
  --red-soft: #FFF5F5;
  --red-border: #FEE2E2;
  --highlight: #FEF08A;
  --highlight-text: #78350F;
  --tab-item-bg: #FAFBFC;
  --tab-item-hover: #F3F4F6;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.10), 0 4px 8px rgba(0,0,0,0.06);
  --theme-toggle-bg: #F3F4F6;
}

/* ─── DARK THEME ─── */
[data-theme="dark"] {
  --bg: #0F1117;
  --surface: #1A1D27;
  --surface-2: #21242F;
  --surface-3: #272B38;
  --border: #2E3244;
  --border-strong: #3D4258;
  --text-primary: #F1F3F9;
  --text-secondary: #8B92A9;
  --text-muted: #5B6178;
  --accent: #6B8AFF;
  --accent-soft: #1A2040;
  --accent-hover: #5A79EE;
  --warning: #F59E0B;
  --warning-soft: #1C1608;
  --warning-border: #78460A;
  --warning-text: #FCD34D;
  --green: #34D399;
  --green-soft: #052E1A;
  --red: #F87171;
  --red-soft: #1F0808;
  --red-border: #3D1515;
  --highlight: #3D3000;
  --highlight-text: #FCD34D;
  --tab-item-bg: #1E2130;
  --tab-item-hover: #252839;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.5), 0 4px 8px rgba(0,0,0,0.3);
  --theme-toggle-bg: #21242F;
}

/* ─── BASE ─── */
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text-primary);
  transition: background 0.25s ease, color 0.25s ease;
}

/* ─── ANIMATIONS ─── */
@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ─── TOOLTIP ─── */
.tooltip-wrap {
  position: relative;
}

.tooltip-wrap .tooltip {
  pointer-events: none;
  position: absolute;
  left: 50%;
  bottom: 100%;
  transform: translateX(-50%);
  margin-bottom: 8px;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.15s ease;
  z-index: 9999;
  background: var(--surface-3);
  border: 1px solid var(--border-strong);
  color: var(--text-primary);
  box-shadow: var(--shadow-lg);
}

.tooltip-wrap:hover .tooltip {
  opacity: 1;
}

/* ─── SCROLLBAR ─── */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 3px; }

/* ─── TAB GROUP CARD ─── */
.tab-group-card {
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  transition: box-shadow 0.15s ease, border-color 0.15s ease, background 0.25s;
}

.tab-group-card:hover {
  box-shadow: var(--shadow-md);
}

.tab-group-card.expanded {
  border-color: var(--border-strong);
}

.tab-group-card.auto-save {
  border-left: 3px solid var(--border-strong);
}

.tab-group-header {
  padding: 14px 16px;
  transition: background 0.12s ease;
}

.tab-group-header:hover {
  background: var(--surface-2);
}

.tab-group-chevron {
  color: var(--text-muted);
  font-style: normal;
  transition: transform 0.22s cubic-bezier(0.4, 0, 0.2, 1), color 0.15s;
}

.tab-group-chevron.expanded {
  color: var(--accent);
  transform: rotate(90deg);
}

.tab-group-rename-input {
  border: 1.5px solid var(--accent);
  background: var(--surface);
  color: var(--text-primary);
}

.tab-group-name {
  color: var(--text-primary);
}

.tab-group-name.auto-save {
  color: var(--text-secondary);
}

.tab-group-summary {
  color: var(--text-muted);
  font-style: italic;
}

.tab-group-meta {
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

.tab-group-checkbox {
  accent-color: var(--accent);
}

.duplicate-badge {
  background: var(--warning-soft);
  border: 1px solid var(--warning-border);
  color: var(--warning-text);
  padding: 2px 8px;
}

.auto-badge {
  background: var(--surface-3);
  border: 1px solid var(--border);
  color: var(--text-muted);
  padding: 2px 7px;
  letter-spacing: 0.3px;
}

.tab-group-delete-btn {
  color: var(--red);
  border: 1px solid var(--red-border);
  background: var(--red-soft);
  transition: all 0.12s ease;
}

.tab-group-delete-btn:hover {
  background: var(--red-border);
}

.categorization-loading {
  color: var(--text-muted);
  font-size: 12px;
}

.categorization-spinner {
  animation: spin 1s linear infinite;
  display: inline-block;
}

.tag-pill {
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  color: var(--accent);
  padding: 2px 8px;
}

.categorization-info-note {
  background: var(--surface-2);
  border: 1px solid var(--border);
  padding: 10px 14px;
}

.categorization-info-text {
  color: var(--text-muted);
}

.tab-group-subgroups {
  border-top: 1px solid var(--border);
  padding: 12px;
}

.tab-list-border {
  border-top: 1px solid var(--border);
}

.load-more-btn {
  padding: 10px 16px;
  color: var(--accent);
  background: var(--surface-2);
  border: none;
  border-top: 1px solid var(--border);
  font-family: 'DM Sans', sans-serif;
  transition: background 0.12s ease;
}

.load-more-btn:hover {
  background: var(--surface-3);
}

.action-btn {
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-secondary);
  transition: all 0.12s ease;
}

.action-btn:hover {
  background: var(--surface-3);
  border-color: var(--border-strong);
  color: var(--text-primary);
}

/* ─── TAB ITEM ─── */
.tab-item {
  background: var(--tab-item-bg);
  transition: background 0.12s ease;
}

.tab-item:hover {
  background: var(--tab-item-hover);
}

.tab-item-favicon {
  background: var(--surface-3);
}

.tab-item-url {
  font-family: 'DM Mono', monospace;
}

/* ─── SEARCH BAR ─── */
.search-input {
  background: var(--surface);
  box-shadow: 0 0 0 4px rgba(79, 110, 247, 0.08);
  font-family: 'DM Sans', sans-serif;
}

.search-input:focus {
  box-shadow: 0 0 0 4px rgba(79, 110, 247, 0.14);
}

.search-clear-btn {
  right: 14px;
  background: var(--surface-3);
}

.search-clear-btn.with-badge {
  right: 90px;
}

.search-result-count {
  background: var(--accent-soft);
  font-family: 'DM Mono', monospace;
}

/* ─── SEARCH RESULT ITEM ─── */
.search-result-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 13px 16px;
  box-shadow: var(--shadow-sm);
  transition: all 0.15s ease;
  animation: slideIn 0.18s ease both;
}

.search-result-card:hover {
  border-color: var(--border-strong);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.search-result-card:active {
  transform: translateY(0);
}

.search-result-card:hover .search-result-accent-bar {
  background: var(--accent);
}

.search-result-accent-bar {
  background: transparent;
  transition: background 0.15s ease;
}

.search-result-favicon {
  background: var(--surface-2);
  border: 1px solid var(--border);
}

.search-result-title {
  color: var(--text-primary);
}

.search-result-url {
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

.search-highlight {
  background: var(--highlight);
  color: var(--highlight-text);
}

.search-result-pill {
  background: var(--surface-2);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  padding: 3px 8px;
  white-space: nowrap;
}

.search-result-date {
  color: var(--text-muted);
  font-family: 'DM Mono', monospace;
}

.search-result-arrow {
  color: var(--accent);
}

/* ─── SUB GROUP SECTION ─── */
.sub-group-container {
  background: var(--surface-2);
  border: 1px solid var(--border);
  margin-bottom: 6px;
}

.sub-group-header {
  padding: 10px 14px;
  background: transparent;
  border: none;
  font-family: 'DM Sans', sans-serif;
}

.sub-group-name {
  color: var(--text-primary);
}

.sub-group-count {
  color: var(--text-muted);
}

.sub-group-chevron {
  color: var(--text-muted);
  transition: transform 0.2s ease;
  display: inline-block;
}

.sub-group-chevron.open {
  transform: rotate(90deg);
}

.sub-group-tabs {
  border-top: 1px solid var(--border);
}

/* ─── APP LAYOUT ─── */
.app-container {
  background: var(--bg);
  padding: 32px 20px 60px;
}

.app-container.with-banner {
  padding-bottom: 100px;
}

.app-inner {
  max-width: 760px;
}

.header-card {
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  padding: 14px 18px;
  transition: background 0.25s, border-color 0.25s;
}

.header-logo {
  background: linear-gradient(135deg, #4F6EF7, #7C3AED);
  box-shadow: 0 2px 8px rgba(79, 110, 247, 0.35);
}

.header-title {
  letter-spacing: -0.3px;
  color: var(--text-primary);
}

.header-stats {
  color: var(--text-muted);
}

.badge-local {
  background: var(--warning-soft);
  border: 1px solid var(--warning-border);
  padding: 4px 10px;
  color: var(--warning-text);
}

.badge-local-dot {
  background: var(--warning);
  animation: pulse-dot 2s infinite;
}

.badge-cloud {
  background: var(--green-soft);
  border: 1px solid var(--green);
  padding: 4px 10px;
  color: var(--green);
}

.badge-cloud-dot {
  background: var(--green);
}

.header-icon-btn {
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-secondary);
  transition: all 0.15s ease;
}

.header-icon-btn:hover {
  background: var(--surface-2);
  border-color: var(--border-strong);
  color: var(--text-primary);
}

.theme-toggle-btn {
  border: 1px solid var(--border);
  background: var(--theme-toggle-bg);
  transition: all 0.15s ease;
}

.theme-toggle-btn:hover {
  border-color: var(--border-strong);
  transform: scale(1.05);
}

.selection-toolbar {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 10px 16px;
}

.selection-count {
  color: var(--text-primary);
}

.toolbar-btn {
  background: none;
  border: none;
}

.toolbar-delete-active {
  color: var(--red);
}

.toolbar-delete-disabled {
  color: var(--text-muted);
}

.toolbar-cancel-btn {
  color: var(--text-secondary);
  background: none;
  border: none;
}

.empty-state-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 52px 24px;
  box-shadow: var(--shadow-sm);
}

.empty-state-title {
  color: var(--text-primary);
}

.empty-state-text {
  color: var(--text-muted);
}

.section-label {
  color: var(--text-muted);
  letter-spacing: 1px;
}

.section-divider {
  background: var(--border);
}

.warning-banner-wrapper {
  padding: 0 20px 16px;
}

.warning-banner {
  max-width: 760px;
  background: var(--warning-soft);
  border: 1px solid var(--warning-border);
  padding: 13px 16px;
  color: var(--warning-text);
  font-size: 13px;
}

.warning-banner-text {
  line-height: 1.5;
}

.usage-banner {
  max-width: 760px;
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  padding: 13px 16px;
  color: var(--accent);
  font-size: 13px;
}

.banner-cta {
  background: var(--accent);
  padding: 6px 14px;
  border: none;
  font-family: 'DM Sans', sans-serif;
  transition: background 0.15s ease;
}

.banner-cta:hover {
  background: var(--accent-hover);
}

/* ─── NAVIGATION TABS ─── */
.nav-tabs {
  display: flex;
  gap: 4px;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  border-radius: 12px;
  padding: 4px;
}

.nav-tab {
  flex: 1;
  padding: 8px 16px;
  border-radius: 9px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: 'DM Sans', sans-serif;
}

.nav-tab:hover {
  color: var(--text-primary);
  background: var(--surface-2);
}

.nav-tab.active {
  background: var(--accent);
  color: white;
  font-weight: 600;
}

/* ─── SMART SEARCH RESULT ─── */
.smart-result-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 13px 16px;
  box-shadow: var(--shadow-sm);
  transition: all 0.15s ease;
  animation: slideIn 0.18s ease both;
}

.smart-result-card:hover {
  border-color: var(--border-strong);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.smart-result-card:active {
  transform: translateY(0);
}

.smart-result-card:hover .smart-result-accent-bar {
  background: var(--accent);
}

.smart-result-accent-bar {
  background: transparent;
  transition: background 0.15s ease;
}

.smart-result-reason {
  color: var(--text-secondary);
  font-style: italic;
}

.smart-search-status {
  color: var(--text-muted);
  font-size: 13px;
  padding: 8px 0;
}

.smart-search-idle {
  padding: 20px 0;
}

/* ─── INSIGHTS ─────────────────────────────────────────────────────────────── */

.insights-summary {
  font-size: 13px;
  color: var(--text-secondary);
  padding: 4px 0 2px;
}

.insights-empty-state {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--green);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px 16px;
}

.insights-duplicate-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  transition: box-shadow 0.15s ease;
}

.insights-duplicate-card:hover {
  box-shadow: var(--shadow-md);
}

.insights-duplicate-url {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 11px 16px 10px;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  font-family: 'DM Mono', monospace;
  word-break: break-all;
}

.insights-occurrence {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 16px;
  font-size: 12px;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border);
  transition: background 0.12s ease;
}

.insights-occurrence:last-child {
  border-bottom: none;
}

.insights-occurrence:hover {
  background: var(--surface-2);
}

.insights-keep-badge {
  font-size: 10px;
  font-weight: 600;
  color: var(--green);
  background: var(--green-soft);
  border-radius: 99px;
  padding: 2px 8px;
  white-space: nowrap;
}

.insights-delete-btn {
  font-size: 11px;
  font-weight: 500;
  color: var(--red);
  background: transparent;
  border: 1px solid var(--red-border);
  border-radius: 99px;
  padding: 2px 10px;
  cursor: pointer;
  transition: background 0.12s ease;
  white-space: nowrap;
}

.insights-delete-btn:hover {
  background: var(--red-soft);
}

.insights-delete-btn--loading {
  color: var(--text-muted);
  border-color: var(--border);
  opacity: 0.7;
  cursor: wait;
}

.insights-cleanup-btn {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  border-radius: 99px;
  padding: 6px 16px;
  cursor: pointer;
  transition: background 0.12s ease;
  white-space: nowrap;
}

.insights-cleanup-btn:hover {
  background: var(--accent-hover);
  color: white;
}

.insights-confirm-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.insights-confirm-yes {
  font-size: 12px;
  font-weight: 600;
  color: white;
  background: var(--red);
  border: none;
  border-radius: 99px;
  padding: 5px 14px;
  cursor: pointer;
  transition: opacity 0.12s ease;
}

.insights-confirm-yes:hover {
  opacity: 0.85;
}

.insights-confirm-cancel {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 99px;
  padding: 5px 14px;
  cursor: pointer;
}

.insights-confirm-cancel:hover {
  background: var(--surface-2);
}

/* Disabled state for delete buttons during bulk cleanup */
.insights-delete-btn:disabled,
.insights-confirm-yes:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

/* Progress text shown during bulk cleanup */
.insights-cleanup-progress {
  font-size: 12px;
  font-weight: 500;
  color: var(--accent);
  font-family: 'DM Mono', monospace;
}

/* Pulsing dot on the Insights nav tab while cleanup is running */
.nav-tab {
  position: relative;
}

.nav-busy-dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--red);
  margin-left: 5px;
  vertical-align: middle;
  animation: pulse 1s ease-in-out infinite;
}

.nav-tab.active .nav-busy-dot {
  background: white;
}

.insights-error {
  font-size: 12px;
  color: var(--red);
  padding: 4px 0;
}

.insights-forgotten-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 13px 16px;
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  gap: 13px;
  transition: box-shadow 0.15s ease;
  min-height: 64px;
}

.insights-forgotten-card:hover {
  box-shadow: var(--shadow-md);
}

.insights-forgotten-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.insights-forgotten-meta {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
  font-family: 'DM Mono', monospace;
}

.insights-open-btn {
  font-size: 11px;
  font-weight: 500;
  color: var(--accent);
  background: var(--accent-soft);
  border: 1px solid var(--accent);
  border-radius: 99px;
  padding: 4px 12px;
  cursor: pointer;
  transition: background 0.12s ease;
  white-space: nowrap;
}

.insights-open-btn:hover {
  background: var(--accent-hover);
  color: white;
}
